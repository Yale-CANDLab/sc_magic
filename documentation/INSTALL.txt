# Using system Python (v3.8.8) on Monterey.
# Should be possible with other Python installations.
# Currently, Apple Silicon Macs must run via Rosetta 2.

# First, you need to have Homebrew if you don't already. Follow instructions on the Homebrew site.
# Then, install the following in Terminal:
brew install hdf5
brew install portaudio libsndfile liblo portmidi

If on an Apple Silicon Mac, you now need to switch to running Terminal in Rosetta mode. (If on an Intel Mac, you can skip these steps). Find Terminal in the Utilities folder, right-click and select "Duplicate",
and rename the new copy "Rosetta Terminal" (or whatever you want). Then, select the application, do "Get Info" (Command-I), and check the box that says "Open using Rosetta". From now on, make sure you are using the Rosetta terminal when running sc_magic. (It's easy to get confused since the terminal window looks the same. One way to check is with the command "uname -m", which returns x86_64 when running under Rosetta.)

Run the following in your Terminal:

export HDF5_DIR='/opt/homebrew/opt/hdf5'
mkdir ~/python-envs
python3 -m venv ~/python-envs/sc
source ~/python-envs/sc/bin/activate

# start by ensuring pip is upgraded (some installs fail without recent pip)
pip install --upgrade pip
pip install numpy psychopy LabJackPython

Finally, you need to install something called Exodriver in order for the Labjack to be functional. You can download the MacOS installer from the Labjack website (https://labjack.com/support/software/installers/exodriver) and follow their instructions.

# Running the task

Whenever you want to run the task, start by activating the virtual environment:
source ~/python-envs/sc/bin/activate

When you're finished, run "deactivate" (or just close the Terminal window).

Last thing: To use the wrapper script, which builds the task run commands for you, you need to create a config file 
in the main directory of the repository. See the local_config template for the formatting.
